image: electronuserland/electron-builder:wine

cache:
  paths:
    - node_modules/

before_script:
  - npm install -g n
  - n 10.16.3
  - npm install

stages:
  - deploy

publish:
  stage: deploy
  when: manual
  script:
    - npm run build
    - curl --request POST --header "Private-Token:MAzPbYT-xgaUgx2Nc4di" --form "file=@/builds/Rett/coordinator/build/coordinator Setup $CI_COMMIT_TAG.exe" "https://gitlab.com/api/v4/projects/Coordinator/uploads"